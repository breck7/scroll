{"version":3,"file":"read-pkg.js","sourceRoot":"","sources":["../../src/read-pkg.ts"],"names":[],"mappings":";;;AACA,iDAAyC;AAWzC,MAAM,SAAS,GAAG,CAAC,CAAM,EAAgB,EAAE,CACzC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,QAAQ,IAAI,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAA;AAEzD,MAAM,SAAS,GAAG,CAAC,CAAM,EAAgB,EAAE;IACzC,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QAAE,OAAO,KAAK,CAAA;IACjE,KAAK,MAAM,CAAC,IAAI,CAAC,EAAE;QACjB,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC;YAAE,OAAO,KAAK,CAAA;KACrC;IACD,OAAO,IAAI,CAAA;AACb,CAAC,CAAA;AAED,MAAM,KAAK,GAAG,CAAC,CAAM,EAAY,EAAE,CACjC,CAAC,CAAC,CAAC;IACH,OAAO,CAAC,KAAK,QAAQ;IACrB,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,OAAO,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;IAC7D,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,QAAQ,IAAI,OAAO,CAAC,CAAC,IAAI,KAAK,WAAW,CAAC;IAC7D,CAAC,OAAO,CAAC,CAAC,MAAM,KAAK,QAAQ,IAAI,OAAO,CAAC,CAAC,MAAM,KAAK,WAAW,CAAC;IACjE,CAAC,OAAO,CAAC,CAAC,OAAO,KAAK,WAAW,IAAI,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;IAC1D,CAAC,OAAO,CAAC,CAAC,OAAO,KAAK,WAAW,IAAI,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAA;AAErD,MAAM,OAAO,GAAG,KAAK,EAAE,CAAS,EAAuB,EAAE;IAC9D,MAAM,EAAE,GAAG,MAAM,IAAA,uBAAQ,EAAC,CAAC,CAAC,CAAA;IAC5B,OAAO,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAA;AAC9B,CAAC,CAAA;AAHY,QAAA,OAAO,WAGnB","sourcesContent":["import { Exports, Imports } from './index.js'\nimport { readJSON } from './read-json.js'\n\nexport type Pkg = {\n  name?: string\n  main?: string\n  type?: string\n  module?: string\n  exports?: Exports\n  imports?: Imports\n}\n\nconst isExports = (e: any): e is Exports =>\n  !!e && (typeof e === 'object' || typeof e === 'string')\n\nconst isImports = (e: any): e is Exports => {\n  if (!e || typeof e !== 'object' || Array.isArray(e)) return false\n  for (const p in e) {\n    if (!p.startsWith('#')) return false\n  }\n  return true\n}\n\nconst isPkg = (o: any): o is Pkg =>\n  !!o &&\n  typeof o === 'object' &&\n  (typeof o.name === 'string' || typeof o.name === 'undefined') &&\n  (typeof o.main === 'string' || typeof o.main === 'undefined') &&\n  (typeof o.module === 'string' || typeof o.module === 'undefined') &&\n  (typeof o.exports === 'undefined' || isExports(o.exports)) &&\n  (typeof o.imports === 'undefined' || isImports(o.imports))\n\nexport const readPkg = async (f: string): Promise<Pkg | null> => {\n  const pj = await readJSON(f)\n  return isPkg(pj) ? pj : null\n}\n"]}