{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,IAAI,GAAG,CAClB,GAA2B,EAC3B,EAAa,EACb,KAAuB,EACvB,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,CAAA;AAE7B,MAAM,KAAK,GAAG,CACZ,GAA6B,EAC7B,EAAK,EACL,KAAuB,EACvB,CAAS,EAC+B,EAAE;IAC1C,OAAO,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE;QACrB,MAAM,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;QACjB,IAAI,GAAG,GAAQ,IAAI,CAAA;QACnB,IAAI;YACF,GAAG,GAAG,EAAE,EAAE,CAAA;SACX;QAAC,OAAO,EAAE,EAAE;YACX,OAAO,KAAK,CAAC,EAAE,CAAC,CAAA;SACjB;QACD,CAAC,EAAE,CAAA;QACH,IAAI,GAAG,IAAI,OAAO,GAAG,CAAC,IAAI,KAAK,UAAU,EAAE;YACzC,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAA;SACvD;KACF;IAED,OAAO,EAAE,EAAE,CAAA;AACb,CAAC,CAAA","sourcesContent":["export const loop = (\n  arr: ((...a: any) => any)[],\n  cb: () => any,\n  onerr: (er: any) => any\n) => loop_(arr, cb, onerr, 0)\n\nconst loop_ = <T extends () => any>(\n  arr: ((...a: any[]) => any)[],\n  cb: T,\n  onerr: (er: any) => any,\n  i: number\n): ReturnType<T> | Promise<ReturnType<T>> => {\n  while (i < arr.length) {\n    const fn = arr[i]\n    let ret: any = null\n    try {\n      ret = fn()\n    } catch (er) {\n      return onerr(er)\n    }\n    i++\n    if (ret && typeof ret.then === 'function') {\n      return ret.then(() => loop_(arr, cb, onerr, i), onerr)\n    }\n  }\n\n  return cb()\n}\n"]}