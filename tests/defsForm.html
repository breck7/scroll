<!DOCTYPE html>
<html lang="en">
<body>
<p id="particle3" class="scrollParagraph">This example shows the use of Scroll Defs to create forms even faster than writing Parsers.</p>
<div id="particle5" class="scrollContainerParser" style="width: 100%; box-sizing: border-box; max-width: 1200px; margin: 0 auto;">
<link rel="stylesheet" type="text/css" href=".gazette.css">
<link rel="stylesheet" type="text/css" href=".scroll.css">
<link rel="stylesheet" href=".codeMirror.css">
<script src=".scrollLibs.js"></script>
<script src=".constants.js"></script>

<script>
sendFormViaEmail = form => {
  const mailto = new URL("mailto:")
  const params = []
  const { value, title } = form.querySelector('button[type="submit"]')
  params.push(`subject=${encodeURIComponent(value)}`)
  params.push(`to=${encodeURIComponent(title)}`)
  const oneTextarea = form.querySelector('textarea[title="oneTextarea"]')
  const body = oneTextarea ? codeMirrorInstance.getValue() : Array.from(new FormData(form)).map(([name, value]) => `${name} ${value}`).join("\n")
  params.push(`body=${encodeURIComponent(body)}`)
  mailto.search = params.join("&")
  window.open(mailto.href, '_blank')
}
</script><style> .scrollFormParser {
    font-family: "Gill Sans", "Bitstream Vera Sans", sans-serif;
  }
.scrollFormParser input , .scrollFormParser textarea{
padding: 10px;
margin-bottom: 10px;
width: 100%;
box-sizing: border-box;
} .scrollFormParser label {
  display: block;
  margin-bottom: 5px;
}
</style><form  method='post' action='' class="scrollFormParser"><textarea title="oneTextarea" rows="0" placeholder="" id="particles" name="particles"></textarea>
  <script id="particlesParsers" type="text/plain">
</script>
  <script>{
  const parserRegex = /^[a-zA-Z0-9_]+Parser$/gm
  let {width, height} = document.getElementById('particles').getBoundingClientRect();
  const sp = new Particle(AppConstants.parsers)
  sp.filter(particle => particle.getLine().match(parserRegex)).forEach(part => {
  part.appendLine("boolean suggestInAutocomplete false")
  })
  const customScrollParser = new HandParsersProgram(sp.toString() + document.getElementById("particlesParsers").textContent).compileAndReturnRootParser()
  codeMirrorInstance = new ParsersCodeMirrorMode("custom", () => customScrollParser, undefined, CodeMirror).register().fromTextAreaWithAutocomplete(document.getElementById("particles"), {
    lineWrapping: false,
    lineNumbers: false
  })
  codeMirrorInstance.setSize(width, height);
  codeMirrorInstance.setValue(``); }</script><button value="" title="" class="scrollButton" type="submit">Post</button></form>
<script>
sendFormViaEmail = form => {
  const mailto = new URL("mailto:")
  const params = []
  const { value, title } = form.querySelector('button[type="submit"]')
  params.push(`subject=${encodeURIComponent(value)}`)
  params.push(`to=${encodeURIComponent(title)}`)
  const oneTextarea = form.querySelector('textarea[title="oneTextarea"]')
  const body = oneTextarea ? codeMirrorInstance.getValue() : Array.from(new FormData(form)).map(([name, value]) => `${name} ${value}`).join("\n")
  params.push(`body=${encodeURIComponent(body)}`)
  mailto.search = params.join("&")
  window.open(mailto.href, '_blank')
}
</script><style> .scrollFormParser {
    font-family: "Gill Sans", "Bitstream Vera Sans", sans-serif;
  }
.scrollFormParser input , .scrollFormParser textarea{
padding: 10px;
margin-bottom: 10px;
width: 100%;
box-sizing: border-box;
} .scrollFormParser label {
  display: block;
  margin-bottom: 5px;
}
</style><form  method='post' action='' class="scrollFormParser"><button value="" title="" class="scrollButton" type="submit">Post</button></form></div>
</body>
</html>